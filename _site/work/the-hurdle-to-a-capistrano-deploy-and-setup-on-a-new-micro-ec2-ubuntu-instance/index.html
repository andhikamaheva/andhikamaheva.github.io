<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Ben Chadfield">

  <title>
    
      The hurdle to a Capistrano deploy and setup on a new micro EC2 Ubuntu instance &middot; Ben Chadfield
    
  </title>

  <link rel="stylesheet" href="/assets/application-69e7e23bca522e04ab6f812fa7dda4c5.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400,400italic,700">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
        <img src="/assets/images/ben.jpg" alt="Picture of me" class="avatar" />
      
        <h2><a href="/">Ben Chadfield</a></h2>
      
      <p class="bio">
        Co-founder of <a href="http://csworkflow.com">CS Workflow</a>.
        Also <a href="http://secretsanta.csworkflow.com">Blog Secret Santa</a> and
        <a href="http://www.meetup.com/Content-Strategy-Melbourne/">Content Strategy Melbourne meetup</a>.
        Lots of content and coding. My daughter is 1 year old.
      </p>
    </div>

    <div class="social-links">
      <ul>
        <li><a href="https://twitter.com/benchadfield"><span class="icon-twitter"></span></a></li>
        <li><a href="http://facebook.com/benchadfield"><span class="icon-facebook"></span></a></li>
        <li><a href="http://au.linkedin.com/in/benchadfield"><span class="icon-linkedin"></span></a></li>
        <li><a href="https://github.com/bchadfield"><span class="icon-github-circled"></span></a></li>
        <li><a href="http://www.youtube.com/user/kaliblack"><span class="icon-youtube"></span></a></li>
      </ul>
    </div>

    <!-- <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    </nav> -->

    <p class="copyright">&copy; 2014. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">The hurdle to a Capistrano deploy and setup on a new micro EC2 Ubuntu instance</h1>
  <span class="post-date"><span class="icon-clock"></span>26 January 2013</span>
  <p>At the end of last year I set myself the challenge of getting <a href="https://github.com/capistrano/capistrano" target="_blank">Capistrano</a> to deploy updates for <a href="https://www.dibbist.com" target="_blank">Dibbist</a>. Two previous attempts had tripped up on the same Rake issues. It was something to do with my server setup and I didn’t want to start from scratch.</p>

<p>You may have seen <a href="https://twitter.com/OnlineBen/status/275134571937398784" target="_blank">my tweet</a> announcing that I’d been successful, so you’ll know I go it working. I did for Dibbist and even more recently repeated the same process for another project I’m helping out with. This post isn’t a tutorial on deploying from scratch with Capistrano. I learnt by watching the excellent Railscasts (referenced in my success tweet) about Capistrano. Episode #375 links to the recipes I used. Why no details? These screencasts are part of the paid section of Railscasts and I’m not going to cut someone’s lunch, especially Ryan Bates.</p>

<p>This post is about the hurdle I faced twice when following the Railscasts process. Obviously to get a Rails app working you need Ruby installed on the server. The problem I found was that the micro instance took ages to install Ruby. The connection to the server would freeze and Capistrano would just sit there waiting forever for the install to finish. If you looked at the instance activity in the AWS console you’d see that the CPU had finished with compiling and installing.</p>

<p>The solution is to install Ruby manually at the same time you setup the Deployer user. This will still have the issue with the connection freezing, but once the CPU is finished you’re done. Just remove the Ruby install from the recipes and run.</p>

<p>The setup I’m currently using for Dibbist is:</p>

<ul>
  <li>EC2 micro instance of Ubuntu 12.04</li>
  <li>Nginx redirecting all to https</li>
  <li>Unicorn with 2 workers</li>
  <li>Postgres</li>
</ul>

</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
    
      <li>
        <h4>
          <a href="/work/blog-secret-santa-problems-and-fixes/">Blog Secret Santa's problems from last year and this year's fixes</a>
          <small><span class="icon-clock"></span>19 November 2014</small>
        </h4>

      </li>
    
      <li>
        <h4>
          <a href="/work/how-i-migrated-wordpress-to-jekyll/">How I migrated from Wordpress to Jekyll</a>
          <small><span class="icon-clock"></span>01 July 2014</small>
        </h4>

      </li>
    
      <li>
        <h4>
          <a href="/work/birthing-a-content-strategy/">Birthing a Content Strategy</a>
          <small><span class="icon-clock"></span>25 December 2013</small>
        </h4>

      </li>
    
  </ul>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'benchadfield'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
    
    	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-37077125-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();

	</script>
  </body>
</html>
